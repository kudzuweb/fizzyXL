@layer components {
  /* Stacked Depth Strategy - Paper Stack Effect
  /* ------------------------------------------------------------------------ */
  /* Creates visual "mass" through layered shadows
  /* More layers = larger size */

  .card.card--size-xs {
    /* No stacking - flat appearance */
  }

  .card.card--size-s {
    box-shadow:
      0 1px 3px oklch(var(--lch-black) / 8%),
      2px 2px 0 0 var(--card-bg-color),
      2px 2px 0 1px oklch(var(--lch-black) / 15%);
    transform: translate(-1px, -1px);
    margin-bottom: 2px;
  }

  .card.card--size-m {
    box-shadow:
      0 1px 3px oklch(var(--lch-black) / 8%),
      2px 2px 0 0 var(--card-bg-color),
      2px 2px 0 1px oklch(var(--lch-black) / 15%),
      4px 4px 0 0 var(--card-bg-color),
      4px 4px 0 1px oklch(var(--lch-black) / 15%);
    transform: translate(-2px, -2px);
    margin-bottom: 4px;
  }

  .card.card--size-l {
    box-shadow:
      0 1px 3px oklch(var(--lch-black) / 8%),
      2px 2px 0 0 var(--card-bg-color),
      2px 2px 0 1px oklch(var(--lch-black) / 15%),
      4px 4px 0 0 var(--card-bg-color),
      4px 4px 0 1px oklch(var(--lch-black) / 15%),
      6px 6px 0 0 var(--card-bg-color),
      6px 6px 0 1px oklch(var(--lch-black) / 15%);
    transform: translate(-3px, -3px);
    margin-bottom: 6px;
  }

  .card.card--size-xl {
    box-shadow:
      0 1px 3px oklch(var(--lch-black) / 8%),
      2px 2px 0 0 var(--card-bg-color),
      2px 2px 0 1px oklch(var(--lch-black) / 15%),
      4px 4px 0 0 var(--card-bg-color),
      4px 4px 0 1px oklch(var(--lch-black) / 15%),
      6px 6px 0 0 var(--card-bg-color),
      6px 6px 0 1px oklch(var(--lch-black) / 15%),
      8px 8px 0 0 var(--card-bg-color),
      8px 8px 0 1px oklch(var(--lch-black) / 15%);
    transform: translate(-4px, -4px);
    margin-bottom: 8px;
  }

  /* Size Picker Dialog
  /* ------------------------------------------------------------------------ */
  /* Ensure dialog appears above card content by elevating the actions container
  /* Matches the existing tooltip pattern in card-perma.css */

  .card-perma__actions:has(dialog[open]) {
    z-index: var(--z-tooltip);
  }

  /* Size Picker - Vertical Column Layout
  /* ------------------------------------------------------------------------ */
  /* Compact vertical column dropdown positioned below button */

  .popup.size-picker {
    --panel-size: auto;
    --panel-border-radius: 0.75em;

    /* Position below button, aligned to left edge */
    inset: 100% auto auto 0 !important;
    transform: translateY(0.5em) !important;

    /* Narrow column sizing */
    min-inline-size: 120px !important;
    max-inline-size: 160px !important;
    padding: var(--block-space-half);

    /* Override centering from base popup */
    margin: 0;
  }

  .popup.size-picker .btn {
    padding-block: var(--block-space-half);
    justify-content: center;
    inline-size: 100%;
    display: flex;
  }
}
