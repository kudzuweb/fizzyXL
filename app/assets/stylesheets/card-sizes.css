@layer components {
  /* Signal Bars Strategy - Capacity Indicator
  /* ------------------------------------------------------------------------ */
  /* 5 vertical bars like cell signal strength, filled based on size level */

  .card__signal-bars {
    position: absolute;
    bottom: var(--card-padding-block);
    right: var(--card-padding-inline);
    display: flex;
    align-items: flex-end;
    gap: 2px;
    height: 14px; /* 3.5 * 4px base unit */
    z-index: 1;
  }

  .signal-bar {
    width: 3px;
    border-radius: 1px;
    transition: background-color 200ms ease-out;
  }

  /* Bar heights - each 20% taller than previous */
  .signal-bar--1 { height: 20%; }
  .signal-bar--2 { height: 40%; }
  .signal-bar--3 { height: 60%; }
  .signal-bar--4 { height: 80%; }
  .signal-bar--5 { height: 100%; }

  /* Active bars - use card color mixed with ink */
  .signal-bar[data-active="true"] {
    background-color: color-mix(in srgb, var(--card-color) 60%, var(--color-ink));
  }

  /* Inactive bars - subtle background */
  .signal-bar[data-active="false"] {
    background-color: color-mix(in srgb, var(--card-color) 10%, var(--color-ink-lighter));
  }

  /* Dark mode - adjust inactive bar visibility */
  @media (prefers-color-scheme: dark) {
    .signal-bar[data-active="true"] {
      background-color: color-mix(in srgb, var(--card-color) 70%, var(--color-ink-inverted));
    }

    .signal-bar[data-active="false"] {
      background-color: color-mix(in srgb, var(--color-ink-lighter) 50%, transparent);
    }
  }

  /* Size Picker Dialog
  /* ------------------------------------------------------------------------ */
  /* Ensure dialog appears above card content by elevating the actions container
  /* Matches the existing tooltip pattern in card-perma.css */

  .card-perma__actions:has(dialog[open]) {
    z-index: var(--z-tooltip);
  }

  /* Size Picker - Vertical Column Layout
  /* ------------------------------------------------------------------------ */
  /* Compact vertical column dropdown positioned below button */

  .popup.size-picker {
    --panel-size: auto;
    --panel-border-radius: 0.75em;

    /* Position below button, aligned to left edge */
    inset: 100% auto auto 0 !important;
    transform: translateY(0.5em) !important;

    /* Narrow column sizing */
    min-inline-size: 120px !important;
    max-inline-size: 160px !important;
    padding: var(--block-space-half);

    /* Override centering from base popup */
    margin: 0;
  }

  .popup.size-picker .btn {
    padding-block: var(--block-space-half);
    justify-content: center;
    inline-size: 100%;
    display: flex;
  }
}
