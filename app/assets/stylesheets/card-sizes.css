@layer components {
  /* Cornerstone Strategy - Triangle Badge
  /* ------------------------------------------------------------------------ */
  /* Triangle size and shade indicate t-shirt size level */

  .card.card--size-xs::after,
  .card.card--size-s::after,
  .card.card--size-m::after,
  .card.card--size-l::after,
  .card.card--size-xl::after {
    content: "";
    position: absolute;
    top: 0;
    right: 0;
    width: 0;
    height: 0;
    border-style: solid;
    z-index: 2;
  }

  .card.card--size-xs::after {
    border-width: 0 10px 10px 0;
    border-color: transparent oklch(var(--lch-ink-lighter)) transparent transparent;
  }

  .card.card--size-s::after {
    border-width: 0 16px 16px 0;
    border-color: transparent oklch(var(--lch-ink-light)) transparent transparent;
  }

  .card.card--size-m::after {
    border-width: 0 24px 24px 0;
    border-color: transparent oklch(var(--lch-ink-medium)) transparent transparent;
  }

  .card.card--size-l::after {
    border-width: 0 32px 32px 0;
    border-color: transparent oklch(var(--lch-ink-dark)) transparent transparent;
  }

  .card.card--size-xl::after {
    border-width: 0 42px 42px 0;
    border-color: transparent oklch(var(--lch-ink-darker)) transparent transparent;
  }

  /* Dark mode - use inverse ink scale */
  @media (prefers-color-scheme: dark) {
    .card.card--size-xs::after {
      border-color: transparent oklch(var(--lch-ink-lightest)) transparent transparent;
    }

    .card.card--size-s::after {
      border-color: transparent oklch(var(--lch-ink-lighter)) transparent transparent;
    }

    .card.card--size-m::after {
      border-color: transparent oklch(var(--lch-ink-medium)) transparent transparent;
    }

    .card.card--size-l::after {
      border-color: transparent oklch(var(--lch-ink-light)) transparent transparent;
    }

    .card.card--size-xl::after {
      border-color: transparent oklch(var(--lch-ink-dark)) transparent transparent;
    }
  }

  /* Size Picker Dialog
  /* ------------------------------------------------------------------------ */
  /* Ensure dialog appears above card content by elevating the actions container
  /* Matches the existing tooltip pattern in card-perma.css */

  .card-perma__actions:has(dialog[open]) {
    z-index: var(--z-tooltip);
  }

  /* Size Picker - Vertical Column Layout
  /* ------------------------------------------------------------------------ */
  /* Compact vertical column dropdown positioned below button */

  .popup.size-picker {
    --panel-size: auto;
    --panel-border-radius: 0.75em;
    inset: 100% auto auto 0 !important;
    transform: translateY(0.5em) !important;
    min-inline-size: 120px !important;
    max-inline-size: 160px !important;
    padding: var(--block-space-half);
    margin: 0;
  }

  .popup.size-picker .btn {
    padding-block: var(--block-space-half);
    justify-content: center;
    inline-size: 100%;
    display: flex;
  }
}
